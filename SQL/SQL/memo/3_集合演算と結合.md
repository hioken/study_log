# 集合演算
## 集合演算とは
- 複数のSELECTの結果を計算する
- 重複は省かれるが、ALLを付けると残る
- 同じ列のデータ型が異なる場合、列数が異なる場合はエラー
- ORDER BYは最後のSELECTの後に指定する
- 列名は、最初のSELECT句が採用される
- SELECT文 集合演算子 SELECT文
```sql
SELECT name, price from table_1
UNION
SELECT name, cost from table_2
```
<br>

## 集合演算子
|演算子|説明|
| ---- |---- |
| UNION | `和`: 表を縦方向に連結 |
| INTERSECT | `積`: 表の重複している結果を抽出 |
| EXCEPT | `差`: 最初のSELECTの表から、以降の表にないものを表示 ※MySQLでは使用できない |
|  | '':　MySQLの場合は、WHERE NOT EXISTSを使う |

<br>


# 結合
## 結合とは
- 1:n、もしくは1:n:1になっているテーブル同士を横方向に結合する
- 共通の値を持つ列を使って結合する
- 外部キーを持たない側の方のレコードは増えると捉えることもできる
- JOIN句にテーブル名、続けてON句に結合部を書く
- SELECT 別名.カラム FROM 元のテーブル AS 別名1 結合方法 JOIN 結合するテーブル AS 別名2 ON 別名1.キー = 別名2.キー
- JOIN句はfromの後、whereの手前に書く
- 多重結合を行う場合は、ON句の後に続けてJOIN句を書く
- WHERE句以下は結合の後に読まれる
```sql
SELECT t1.column, t2.column
  FROM table_1 AS t1 INNER JOIN table_2 ON t1.id = t1.table_1_id
    JOIN table_3 AS t3 ON t2.id = t3.table_2_id
  WHERE t1.id = 1;
```

<br>

## INNER 内部結合
- 共通の値を持つレコードだけ結合

<br>

## OUTER 外部結合
- 内部結合を行った後、さらに片方のテーブルから、結合を行わなかったレコードを一つずつ取ってくる
- その際、取得できない列はNULLになる
- OUTERの前に全て表示するテーブルを選択する
  - LEFTを指定すると元のテーブル、RIGHTを指定すると結合するテーブルの情報を全て取ってくる

<br>

## CROSS クロス結合
- レコードの組合わせ全てを表示する
- そのためON句が存在しない
