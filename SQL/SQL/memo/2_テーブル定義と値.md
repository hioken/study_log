# データ型
## 数値
- 整数
  - INT INTEGER: 整数
  - ~INTというカラムがたくさんあるが、全部容量の問題
    - TIMYINTが1byte(127)、SMALLINTが2byte(32767)、ECサイトの顧客の購入数の管理はここら辺でよさそう
    - INTは4byte(2億以上)
- 小数
  - DECIMAL(m,d) NUMERIC: 固定少数 
  - FLOAT(m,d): 浮動小数
  - 精度について
    - mが制度、dがスケール(mが合計桁桁数、nが小数点以下の桁数、四捨五入される)

## 文字
  - mは文字数orByte数
- 文字列
  - CHAR(m): 固定長
  - VARCHAR(m): 可変長
- バイナリ
  - BINARY(m): 固定長
  - VARBINARY(m): 可変長
- 管理
  - ENUM: 後述
  - SET:
  - 固定の文字を複数定義して、その中から任意の数を値に出来る
  - 各値はbit長で管理されていて、bitを指定する事で取り出せる(1なら1つめ、4なら3つめ、3なら1つめと2つめ)
  - enumとほぼ一緒？

## 時間
- 日付
  - DATE: 日付
- 日時
  - DATETIME: 日付 + 時間
  - TIMESTAMP: レコードをcreateとupdateした時の日時

<br>

# 制約
## 基礎
- カラムの値の条件を指定する
- KEYを複数選択した場合、その組合わせが一意的なものとして扱われ、単体は一意でなくても良い

<br>

## 制約の種類
|制約名|説明|
| ---- | ---- |
|PRIMARY KEY|主キーとしてテーブルに定義する, NOT NULL + UNIQUE KEY|
|NOT NULL|NULLを禁止する|
|UNIQUE KEY|値の被りを禁止する|
|CHECK (条件式)|条件式がtrueを出す値しか登録出来ない|
|FOREIGN KEY|他のテーブルの列を参照して、その列にない値を禁止、他のテーブルとの結合部になる目的で定義される|
|DEFAULT 値|デフォルト値の設定、NOT NULLになるわけでは無い|

<br>

## 外部キー
### 概要
- FOREIGN KEY (KEY) REFERENCES 親テーブル(親テーブルのKEY) ON 対象 参照アクション ON 対象 参照アクション
  - この場合のKEYとは外部キーと、その参照先の列の事を指す
  - 参照アクションは下記 
- CONSTRAINT句を前に置き、名前を付ける事が可能
  - 外部キー制約の変更、削除に便利
```sql
CREATE TABLE child_table (
  id INT PRIMARY KEY,
  parent_id INT,
  name VARCHAR(...
  ...,
  CONSTRAINT fk_parent_child
    FOREIGN KEY (parent_id)
    REFERENCES parent(id)
    ON UPDATE CASCADE ON DELETE RESTRICT
)
```

<br>

### 外部キーの参照アクション一覧
|参照アクション|説明|
| ---- | ---- |
|CASCADE|親テーブル: 更新, 削除可 / 子テーブル: 自動更新or削除|
|SET NULL|親テーブル: 更新, 削除可 / 子テーブル: NULLをセット, NOT NULLが使えない|
|RESTRICT|親テーブル: 更新, 削除不可|
|NO ACTION|親テーブルの更新と削除を一切拒否|

<br>

# 値
## 定数
|記述|説明|
| ---- | ---- |
|"value"|文字列、クォーテーションで囲う|
|1|数値、数値をそのまま記述する|
|"2020-12-31"|日付|
|NULL|空|

## 式
|記述|説明|
| ---- | ---- |
| @var_name | 変数 |
| func_name(arg) | 関数 |
