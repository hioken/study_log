## 文法

### 文字列
- ''だとエスケープシーケンスや式展開などが使えない
- ""推奨
- ""中は、式展開などを\で打ち消せる
- 式展開中はto_sが勝手に呼ばれるため、数値型も扱える
- %q区切り文字 区切り文字で''、qを大文字にすると""と同じ意味になる
- 文字列は途中で改行できる
- ヒアドキュメント
  - <<識別子
    識別子
  - これで、識別子内が""の文字列として扱われる
  - インデントを消したりするオプションがある
  - 最初の識別子は式として扱われ、最初の識別子を引数に指定したり、メソッドを続けて書くことで、文字列の内容を引数やレシーバーに指定できる
  - method(<<TEXT)
      文字列
    TEXT
    この場合"文字列"が引数として渡される
- 文字列 * 回数 で文字列を繰り返せる

### %記法
- !!は()に置き換え可能
- %q!値! == '値'
- %Q!値! == "値"
- %W!値1, 値2! == [値1, 値2]
- 改行で区切り、\でエスケープ可
```
%W!
    値1
    値2\ 
!
== ["値1", "値2 "]
```
### 数値
- 0b, 0, 0x でそれぞれ、2, 8, 16進数を表現できる
- 値e-指数で指数表記が出来る(2e-3 => 0.002)
- ビット演算が可能(0b0110 & 0b1010 => 0b0010)

### 真偽値と論理式
- nilはfalse、それ以外はtrue
- 複数の条件式 && などは()で優先順位を変えられる(通常は&&が優先)
  - a = b && ( a > 10 || a < 0 ) && is_active
- !で真偽を逆転させられる
  - data = true
  - !data => false
  - !(1 == 2) => true
- &&, || の優先度低いverに and, orがある
  - and, orに優先度の差異はない
  - 最低優先度の為、空白が行内に入る際に便利
  - number or return "入力が空です"
    - この式の場合、numberが空の場合はnil(false)のため、真偽が確定せず、orの向こう側の return "入力が空です"を処理して、処理を抜ける。
    - これを||にすると、(number || return) "入力が空です" と認識されてしまう

### 代入
- 代入は、 = の後で改行すると、次の行以降の戻り値を代入する、以下例
  ```
  data =
    if message
      data = "#{user_name} #{message}
    else
      "入力をやり直してください"
    end
  ```
- ,で区切って左辺と右辺にそれぞれ変数と値を複数指定することで、多重代入が可能
  - a, b, c = 1, 2, 3
- =を繋げる事で同時代入が可能
  - a = b = 10

### 改行と区切り
- ;を使って改行を示して、1行に複数コードを記述出来る
- \を使って、改行していない事を示して、複数行に長い1行のコードを記入できる

### if, case
- ifは一行で書ける
  ```
  string = 'hello' if data == 'eng'
  if data == true then puts 'hello'
  ```
- case文は複数条件をorの形で記述可能
  ```
  message =
      case country
      when 'japan', '日本', 'JPN'
        'こんにちは'
      when 'US', 'アメリカ'
        'Hello!'
      else
        'no data'
      end
  ```
- 三項演算子 => 条件 ? trueの戻り値 : falseの戻り値

### メソッド
#### 文法
- エイリアスメソッド : 同じメソッドに複数の名前がついている事(.sizeと.length等)
- 引数を示す()はスペースで表現できる
- メソッドの命名規則
  - ?で終わるメソッドは真偽値を返すもの
  - !で終わるメソッドは、注意事項があるもの、または破壊的なメソッド
    - 破壊的とは、レシーバー自信のデータが書き変わるようなもの(.upcase!等)
#### 引数の種類
- 引数にはデフォルト値を決めることができる、これにより、引数の数を柔軟に変える事が可能
  - def メソッド名(引数 = デフォルト値)
- 複数の引数を配列として受け取れる(可変長変数)
  - 配列で受け取りたい場合は*を付ける
  ```
  def method(*引数s); end; method(1, 2, 3) => *引数s => [1, 2, 3]
  ```
  - hashで受け取りたい場合は**を付ける、呼び出し時はhashに{}を付ける
  - hashの引数が最後の場合は、{}を省略できる(非推奨)
  ```
  def method(**引数); end; method({key1: 1, key2: 2}) #=> 引数 == {key1: 1, key2: 2}
  ```
- キーワード引数 def method(hikisu: デフォルト値); end
  - デフォルト値を設定した上で、キーワードを設定できる
  - method(hikisu: 値)と記述して呼び出す
  - キーワード引数を設定した場合、値のみを記述した場合は呼び出せなくなる (method(値)は不可)

### コメント
- =begin, =endで範囲コメントアウトが行える

### 参照
- require : Rubyを実行した最初のファイルがカレントディレクトリ
- require_relative : 記述してあるファイルがカレントディレクトリ
- load : 何度でも読み直す(読み込み途中の変更も反映される)

### ターミナル出力
- puts : 改行文字付きで、文字列に変換したものを出力する、対象が配列などの場合は、中身を一つずつ取り出す
- p : 改行文字付きで、対象をそのまま出力する(文字列なら""付き、配列なら[]付き)

## プログラミング共通
- リテラル : 定数の事
- 式と文
  - 戻り値や真偽を返すのが式(つまり、rubyでは厳密にはifやメソッドの定義も式)
  - 代入しようとしたりするとエラーを吐くような、何も返さない物が文
